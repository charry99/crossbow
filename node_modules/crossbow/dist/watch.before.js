"use strict";
var watch_resolve_1 = require("./watch.resolve");
var task_resolve_1 = require("./task.resolve");
var seq = require("./task.sequence");
var debug = require("debug");
function getBeforeTaskRunner(trigger, watchTasks) {
    /**
     * Get 'before' task list
     */
    var beforeTasksAsCliInput = watch_resolve_1.resolveBeforeTasks(trigger.config.before, trigger.input, watchTasks.valid);
    debug("Combined global + task specific 'before' tasks [" + beforeTasksAsCliInput + "]");
    /**
     * Now Resolve the before task names given in input.
     */
    var beforeTasks = task_resolve_1.resolveTasks(beforeTasksAsCliInput, trigger);
    var beforeSequence = seq.createFlattenedSequence(beforeTasks.valid, trigger);
    var beforeRunner = seq.createRunner(beforeSequence, trigger);
    return {
        tasks: beforeTasks,
        sequence: beforeSequence,
        runner: beforeRunner,
        beforeTasksAsCliInput: beforeTasksAsCliInput
    };
}
exports.getBeforeTaskRunner = getBeforeTaskRunner;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2F0Y2guYmVmb3JlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3dhdGNoLmJlZm9yZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EsaURBQStEO0FBQy9ELCtDQUE0QztBQUU1QyxxQ0FBdUM7QUFFdkMsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBVy9CLDZCQUFvQyxPQUF1QixFQUFFLFVBQXNCO0lBQy9FOztPQUVHO0lBQ0gsSUFBTSxxQkFBcUIsR0FBRyxrQ0FBa0IsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUV6RyxLQUFLLENBQUMscURBQW1ELHFCQUFxQixNQUFHLENBQUMsQ0FBQztJQUVuRjs7T0FFRztJQUNILElBQU0sV0FBVyxHQUFNLDJCQUFZLENBQUMscUJBQXFCLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDcEUsSUFBTSxjQUFjLEdBQUcsR0FBRyxDQUFDLHVCQUF1QixDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDL0UsSUFBTSxZQUFZLEdBQUssR0FBRyxDQUFDLFlBQVksQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFFakUsTUFBTSxDQUFDO1FBQ0gsS0FBSyxFQUFLLFdBQVc7UUFDckIsUUFBUSxFQUFFLGNBQWM7UUFDeEIsTUFBTSxFQUFJLFlBQVk7UUFDdEIscUJBQXFCLHVCQUFBO0tBQ3hCLENBQUM7QUFDTixDQUFDO0FBckJELGtEQXFCQyJ9