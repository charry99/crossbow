"use strict";
var RxNode = require("rx-node");
var Rx = require("rx");
var types = {
    observable: {
        predicate: function (input) {
            return Rx.Observable.isObservable(input);
        },
        handle: handleObs
    },
    promise: {
        predicate: function (input) {
            return typeof input.then === "function";
        },
        handle: handlePromise
    },
    nodeStream: {
        predicate: function (input) {
            return typeof input.on === "function";
        },
        handle: handleNodeStream
    }
};
function handleReturnType(output, cb) {
    var match = Object.keys(types).filter(function (x) {
        return types[x].predicate.call(null, output);
    })[0];
    if (match && typeof types[match].handle === "function") {
        return types[match].handle.apply(null, [output, cb]);
    }
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = handleReturnType;
;
function handleNodeStream(output, done) {
    return RxNode.fromStream(output, "end")
        .subscribe(function (val) {
    }, function (err) {
        done(err);
    }, function () {
        done();
    });
}
function handlePromise(output, done) {
    return Rx.Observable
        .fromPromise(output)
        .subscribe(function (val) {
    }, function (err) {
        done(err);
    }, function () {
        done();
    });
}
function handleObs(output, done) {
    return output
        .subscribe(function (val) {
    }, function (e) {
        done(e);
    }, function () {
        done();
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay5yZXR1cm4udmFsdWVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3Rhc2sucmV0dXJuLnZhbHVlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ2hDLElBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUV2QixJQUFNLEtBQUssR0FBRztJQUNWLFVBQVUsRUFBRTtRQUNSLFNBQVMsWUFBRSxLQUFLO1lBQ1osTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzdDLENBQUM7UUFDRCxNQUFNLEVBQUUsU0FBUztLQUNwQjtJQUNELE9BQU8sRUFBRTtRQUNMLFNBQVMsWUFBRSxLQUFLO1lBQ1osTUFBTSxDQUFDLE9BQU8sS0FBSyxDQUFDLElBQUksS0FBSyxVQUFVLENBQUM7UUFDNUMsQ0FBQztRQUNELE1BQU0sRUFBRSxhQUFhO0tBQ3hCO0lBQ0QsVUFBVSxFQUFFO1FBQ1IsU0FBUyxZQUFFLEtBQUs7WUFDWixNQUFNLENBQUMsT0FBTyxLQUFLLENBQUMsRUFBRSxLQUFLLFVBQVUsQ0FBQztRQUMxQyxDQUFDO1FBQ0QsTUFBTSxFQUFFLGdCQUFnQjtLQUMzQjtDQUNKLENBQUM7QUFRRiwwQkFBeUMsTUFBTSxFQUFFLEVBQWM7SUFFM0QsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBQSxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDakQsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFTixFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDckQsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pELENBQUM7QUFDTCxDQUFDOztBQVRELG1DQVNDO0FBQUEsQ0FBQztBQUVGLDBCQUEwQixNQUFNLEVBQUUsSUFBSTtJQUNsQyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDO1NBQ2xDLFNBQVMsQ0FBQyxVQUFVLEdBQUc7SUFDeEIsQ0FBQyxFQUFFLFVBQVUsR0FBRztRQUNaLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNkLENBQUMsRUFBRTtRQUNDLElBQUksRUFBRSxDQUFDO0lBQ1gsQ0FBQyxDQUFDLENBQUM7QUFDWCxDQUFDO0FBRUQsdUJBQXVCLE1BQU0sRUFBRSxJQUFJO0lBQy9CLE1BQU0sQ0FBQyxFQUFFLENBQUMsVUFBVTtTQUNmLFdBQVcsQ0FBQyxNQUFNLENBQUM7U0FDbkIsU0FBUyxDQUFDLFVBQUMsR0FBRztJQUNmLENBQUMsRUFBRSxVQUFBLEdBQUc7UUFDRixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDZCxDQUFDLEVBQUU7UUFDQyxJQUFJLEVBQUUsQ0FBQztJQUNYLENBQUMsQ0FBQyxDQUFDO0FBQ1gsQ0FBQztBQUVELG1CQUFtQixNQUFNLEVBQUUsSUFBSTtJQUMzQixNQUFNLENBQUMsTUFBTTtTQUNSLFNBQVMsQ0FBQyxVQUFBLEdBQUc7SUFDZCxDQUFDLEVBQUUsVUFBQSxDQUFDO1FBQ0EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ1osQ0FBQyxFQUFFO1FBQ0MsSUFBSSxFQUFFLENBQUM7SUFDWCxDQUFDLENBQUMsQ0FBQztBQUNYLENBQUMifQ==